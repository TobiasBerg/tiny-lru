!function(t,e){if("function"==typeof define&&define.amd)define("tiny-lru",["exports"],e);else if("undefined"!=typeof exports)e(exports);else{var i={exports:{}};e(i.exports),t.tinyLru=i.exports}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e(this,t),this.first=null,this.items=Object.create(null),this.last=null,this.max=i,this.size=0,this.ttl=s}var s,n,l;return s=t,(n=[{key:"has",value:function(t){return t in this.items}},{key:"clear",value:function(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}},{key:"delete",value:function(t){if(this.has(t)){var e=this.items[t];delete this.items[t],this.size--,null!==e.prev&&(e.prev.next=e.next),null!==e.next&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),this.last===e&&(this.last=e.prev)}return this}},{key:"evict",value:function(){var t=this.first;return delete this.items[t.key],this.first=t.next,this.first.prev=null,this.size--,this}},{key:"get",value:function(t){var e;if(this.has(t)){var i=this.items[t];this.ttl>0&&i.expiry<=(new Date).getTime()?this.delete(t):(e=i.value,this.set(t,e,!0))}return e}},{key:"keys",value:function(){return Object.keys(this.items)}},{key:"set",value:function(t,e){var i,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(s||this.has(t)){if((i=this.items[t]).value=e,!1===s&&(i.expiry=this.ttl>0?(new Date).getTime()+this.ttl:this.ttl),this.last!==i){var n=this.last,l=i.next,r=i.prev;this.first===i&&(this.first=i.next),i.next=null,i.prev=this.last,n.next=i,null!==r&&(r.next=l),null!==l&&(l.prev=r)}}else this.max>0&&this.size===this.max&&this.evict(),i=this.items[t]={expiry:this.ttl>0?(new Date).getTime()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:e},1==++this.size?this.first=i:this.last.next=i;return this.last=i,this}}])&&i(s.prototype,n),l&&i(s,l),t}();var n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(isNaN(t)||t<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");return new s(t,e)};t.default=n}));